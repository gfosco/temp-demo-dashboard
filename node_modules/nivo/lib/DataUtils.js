/*
 * This file is part of the nivo project.
 *
 * (c) RaphaÃ«l Benitte
 *
 * For the full copyright and license information, please view the LICENSE
 * file that was distributed with this source code.
 */
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.flatten = undefined;

var _lodash = require('lodash');

var _lodash2 = _interopRequireDefault(_lodash);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var recursiveFlattener = function recursiveFlattener(stack, node, identityProperty, parentId) {
    if (node.children) {
        node.children.forEach(function (child) {
            recursiveFlattener(stack, child, identityProperty, node[identityProperty]);
        });
    } else {
        stack.push(_lodash2.default.assign({}, node, { parentId: parentId }));
    }
};

var flatten = exports.flatten = function flatten(root, identityProperty) {
    var nodes = [];

    recursiveFlattener(nodes, root, identityProperty);

    return { children: nodes };
};